<!doctype html>
<html>
<head>
<meta charset="UTF-8">
<title>Rich Internet Application</title>

<style>
#details{
	position:relative;
	padding:0;	
}

#details figcaption{
	position:absolute;
	top:10px;
	left:10px;
	background:#000;
	color:#fff;
	font-weight:bold;
}

</style>




<!--[if IE]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>

<body>
<select id="imagesSelect" multiple size="5"></select>
<div id="details">
	<figure>
    	<img width="25%">
        <figcaption></figcaption>
    </figure>
</div>





<script src="http://code.jquery.com/jquery-1.10.1.min.js"></script>
<script>

var images;//declare a global variable to store image objects

//get jQuery to fetch the images data from images.txt
$(document).ready(function(e) {
    
	$('#imagesSelect').change(function(e) {
		$('#details').hide();
        var selectedIndex = $('#imagesSelect').val();
		$('#details img').attr('src','images2/' + images[selectedIndex].fileName);
		
		$('#details figcaption').html(images[selectedIndex].cost);
		
		
		$('#details').fadeIn(500);
    });
	
	
	
	$.ajax({
		url:'images.txt',
		dataType:'json',
		type:'get',
		success: function(data){
			//alert(data.images[0].caption)
			var numImages = data.images.length;
			images = data.images;//store array from external data in global
			//loop thru the array of images
			for(var i=0;i<numImages;i++){
				//alert(data.images[i].caption);
				var option = '<option value="' + i + '">' + data.images[i].caption + '</option>';
				$('#imagesSelect').append(option);	
			}
		},
		error: function(){
			alert('problemo')
		}
	})
});

</script>


</body>
</html>
